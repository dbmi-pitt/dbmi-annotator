--------------------------------------------------------------------
build database : running DDL
--------------------------------------------------------------------

RDB schema creation script in Postgres DB:
../mp_evidence_schema/mp_evidence_schema_08202016.sql

--------------------------------------------------------------------
preparetion
--------------------------------------------------------------------

(1) install python postgres connector 
pip install psycopg2

(2) configure data for loadDomeoAnnsToRDB.py

hostname = 'localhost'
database = 'mpevidence'
csvfiles = ['data/pkddi-katrina-latest-08152016.csv', 'data/pkddi-amy-latest-08152016.csv']

Note: If csv comes from domeo, replace cl to clearance and t12 to halflife

(3) create config/DB-config.txt to store account information

$ cp config/DB-config-sample.txt config/DB-config.txt

USERNAME=<USERNAME>;
PASSWORD=<PASSWORD>;

--------------------------------------------------------------------
domeo annotations translate from csv and load into postgres DB
--------------------------------------------------------------------

(1) execute ETL program loadDomeoAnnsToRDB.py 

$ python loadDomeoAnnsToRDB.py

1. optional: clean all data in table
2. preprocess csv, generate preprocess-domeo.csv
3. load data into schema mpevidence

--------------------------------------------------------------------
dbmi-annotator annotations translate from csv and load into postgres DB
--------------------------------------------------------------------

(1) execute ETL program loadAnnotatorAnnsToRDB.py 

$ python loadAnnotatorAnnsToRDB.py

1. optional: clean all data in table
2. preprocess csv, generate preprocess-annotator.csv
3. load data into schema mpevidence

--------------------------------------------------------------------
D2R server mapping
--------------------------------------------------------------------

D2R server reference: 
http://d2rq.org/getting-started
http://d2rq.org/d2r-server#command-line

Run:
$ cd <path to d2rq directory>
$ ./d2r-server --port 2020 <path to csv-data-loader/d2r-mapping/mpevidence.ttl>

Open browser at "http://localhost:2020"

--------------------------------------------------------------------
D2R server RDF dump (graph mpevidence.rdf)
--------------------------------------------------------------------

Gernerate RDF graph based on d2r mapping configuration 
Reference: http://d2rq.org/dump-rdf

./dump-rdf -f RDF/XML -o mpevidence.rdf --verbose <path to csv-data-loader/d2r-mapping/mpevidence.ttl>

Count instances of claim in RDF graph for validation
grep -r "rdf:Description rdf:about=\"http://dikb.org/mpevidence/mp_claim_annotation" mpevidence.rdf 